{"version":3,"file":"static/webpack/static/development/pages/names.js.437dbacbe73c4a545610.hot-update.js","sources":["webpack:///./components/WomenList.js"],"sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport styled from \"styled-components\";\nimport * as _ from \"lodash\";\nimport { WomenListWrap, Container, InnerWrap } from \"./styles/WomenList\";\nimport { setBodyHeight, _addHighlightClass } from \"./helpers\";\nimport InnerNames from \"./InnerNames\";\n\nclass WomenList extends Component {\n  state = {\n    scrollTop: 0,\n    newlyAddedItem: null,\n    highlightedId: null,\n    copied: {}\n  };\n\n  allWomen = null;\n  womenWithId = null;\n\n  _setCopied = personId => {\n    console.log(personId);\n    console.log(\"inside of setCopied\");\n    const copy = Object.assign({}, this.state.copied);\n    copy[personId] = true;\n    this.setState({ copied: copy });\n  };\n\n  _scrollToHash = () => {\n    if (typeof window === \"undefined\") {\n      return 0;\n    } else {\n      const hash = window.location.hash;\n      if (hash !== \"\") {\n        const id = hash.substr(1);\n        this.setState({ highlightedId: id });\n\n        // TODO: refactor to use refs instead\n        const womenWrapper = document.getElementById(\"womanList\");\n        const scrollEl = document.querySelector(`[data-scrollid=${id}]`);\n\n        if (scrollEl) {\n          const elScrollHeight = scrollEl.offsetTop;\n          const halfHeight = window.innerHeight / 2.5;\n          const totalScrollHeight = elScrollHeight - halfHeight;\n          document.querySelectorAll(`.${id}`).forEach(el => {\n            el.classList.add(\"highlighted\");\n          });\n\n          window.scrollTo({\n            top: totalScrollHeight,\n            left: 0\n          });\n        } else {\n          window &&\n            typeof window === \"object\" &&\n            window.scrollTo &&\n            typeof window.scrollTo === \"function\" &&\n            window.scrollTo(0, 0);\n        }\n      }\n    }\n  };\n\n  componentDidUpdate(prevProps) {\n    console.log(prevProps.women, this.props.women);\n    if (prevProps.women !== this.props.women) {\n      setBodyHeight();\n    }\n  }\n\n  _debounceSetBodyHeight = _.debounce(setBodyHeight, 100);\n\n  componentDidMount() {\n    setBodyHeight();\n    document.addEventListener(\"scroll\", this._throttleScroll);\n    window.addEventListener(\"resize\", this._debounceSetBodyHeight);\n    this.setState({ scrollTop: window.pageYOffset });\n    this._scrollToHash();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this._debounceSetBodyHeight);\n    if (typeof window === \"undefined\") {\n      return 0;\n    } else if (typeof window != \"undefined\") {\n      document.removeEventListener(\"scroll\", this._throttleScroll);\n    }\n  }\n\n  _onScroll = e => {\n    const bodyScrollTop = window.pageYOffset;\n    this.setState({ scrollTop: bodyScrollTop });\n  };\n\n  _throttleScroll = _.throttle(this._onScroll, 100);\n\n  render() {\n    const containers = (\n      <Fragment>\n        <WomenListWrap\n          formFocused={this.props.formFocused}\n          style={{\n            transform: `rotateY(${this.props.x}deg)`\n          }}\n        >\n          <Container\n            style={{\n              transformOrigin: `bottom center`,\n              transform: `matrix3d(\n                  1,\n                  0,\n                  0,\n                  0,\n                  0,\n                  ${this.props.matrix3DVal2},\n                  ${this.props.matrix3DVal1},\n                  0,\n                  0,\n                  ${this.props.matrix3DVal1 * -1},\n                  ${this.props.matrix3DVal2},\n                  0,\n                  0,\n                  0,\n                  0,\n                  1\n                )`\n            }}\n          >\n            <div className=\"hidden\">\n              <InnerWrap\n                order={0}\n                style={{\n                  transform: `translate3d(0px, -${this.state.scrollTop}px, 0px)`\n                }}\n                className=\"womenWrapper\"\n              >\n                <InnerNames\n                  highlightedid={this.state.highlightedId}\n                  names={this.props.women}\n                  setCopied={this._setCopied}\n                  copied={this.state.copied}\n                />\n              </InnerWrap>\n            </div>\n          </Container>\n          <Container>\n            <div className=\"hidden\">\n              <InnerWrap\n                id=\"womanList\"\n                style={{\n                  transform: `translate3d(0px, -${this.state.scrollTop}px, 0px)`\n                }}\n                order={1}\n                className=\"womenWrapper\"\n              >\n                <InnerNames\n                  highlightedid={this.state.highlightedId}\n                  names={this.props.women}\n                  renderwithid={true}\n                  setCopied={this._setCopied}\n                  copied={this.state.copied}\n                />\n              </InnerWrap>\n            </div>\n          </Container>\n          <Container\n            style={{\n              transformOrigin: `top center`,\n              transform: `matrix3d(\n                  1,\n                  0,\n                  0,\n                  0,\n                  0,\n                  ${this.props.matrix3DVal2},\n                  ${this.props.matrix3DVal1},\n                  0,\n                  0,\n                  ${this.props.matrix3DVal1 * -1},\n                  ${this.props.matrix3DVal2},\n                  0,\n                  0,\n                  0,\n                  0,\n                  1\n                )`\n            }}\n          >\n            <InnerWrap\n              style={{\n                transform: `translate3d(0px, -${this.state.scrollTop}px, 0px)`\n              }}\n              order={2}\n              className=\"womenWrapper\"\n            >\n              <InnerNames\n                highlightedid={this.state.highlightedId}\n                names={this.props.women}\n                setCopied={this._setCopied}\n                copied={this.state.copied}\n              />\n            </InnerWrap>\n          </Container>\n        </WomenListWrap>\n      </Fragment>\n    );\n\n    return containers;\n  }\n}\n\n// Set default props\nWomenList.defaultProps = {\n  x: 0,\n  y: 0,\n  matrix3DVal1: 0.18,\n  matrix3DVal2: 0.89\n};\n\nexport default WomenList;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAFA;AAIA;AACA;AAKA;AACA;AACA;AACA;AACA;AAQA;AACA;AAkBA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;AAhCA;AACA;AACA;AAAA;AACA;AACA;AACA;;;AAIA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;;;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;;AASA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AADA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AAFA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AADA;AAGA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AADA;AAGA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AACA;AAFA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwBA;AACA;AADA;AAGA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AACA;;;;AAxMA;AACA;AACA;AA0MA;AACA;AACA;AACA;AACA;AAJA;AAOA;;;;A","sourceRoot":""}